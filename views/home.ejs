<!DOCTYPE html>
<html>
  <%- include('head.ejs') %>
  <body>
    <%- include('header.ejs') %>
    <main class="main">
      <% if (session.userId) { %>
        <div class="nav">
          <% if (tag) { %>
            <h3>Tag: <%= tag %></h3>
          <% } %>
          <% if (name) { %>
            <h3>Name: <%= name %></h3>
          <% } %>
          <% if (price) { %>
            <h3>Price: <%= price %></h3>
          <% } %>
          <% if (sort) { %>
            <h3>Sort by: <%= sort %></h3>
          <% } %>
          <% if (limit) { %>
            <a class="btn" href="<%= hrefShowAll %>">Show All</a>
            <% if (skip > 0) { %>
              <a class="btn" href="<%= hrefPreviousPage %>">Previous page</a>
            <% } %>
            <% if (nextPage < productsLength) { %>
              <a class="btn" href="<%= hrefNextPage %>">Next page</a>
            <% } %>
          <% } else { %>
            <a class="btn" href="<%= hrefPaginate %>">Show 3 by 3</a>
          <% } %>
        </div>
        <div class="nav sorting">
          <div class="sort">
            <h3>SORTING NAME</h3>
            <div style="margin-left: 1.25rem;">
              <a class="btn <%= sort === 'Sort by name from A to Z' ? 'disabled' : '' %>" href="<%= hrefNameSortAtoZ %>">A-Z</a>
              <a class="btn <%= sort === 'Sort by name from Z to A' ? 'disabled' : '' %>" href="<%= hrefNameSortZtoA %>">Z-A</a>
            </div>
          </div>
          <div class="sort" style="margin-top: 3rem;">
            <a class="btn <%= !sort ? 'disabled' : '' %>" href="<%= hrefUnsort %>">UNSORT</a>
          </div>
          <div class="sort">
            <h3>SORTING PRICE</h3>
            <div style="margin-left: 1rem;">
              <a class="btn <%= sort === 'Sort by price ascendent' ? 'disabled' : '' %>" href="<%= hrefPriceSortASC %>">ASC</a>
              <a class="btn <%= sort === 'Sort by price descendent' ? 'disabled' : '' %>" href="<%= hrefPriceSortDES %>">DES</a>
            </div>
          </div>
        </div>
        <div class="nav-filters">
          <h3>FILTERS</h3>
          <div class="nav-filter-forms">
            <form action="<%= 'URLqueryparamsNAME' %>" method="get">
              <div class="name-price-filters">
                <label for="name-filter">NAME</label>
                <input id="name-filter" type="text" required />
                <div class="filter-form-buttons">
                  <button class="btn <%= name ? 'disabled' : '' %>" type="submit">SET</button>
                  <a class="btn <%= !name ? 'disabled' : '' %>" href="<%= hrefNameUnsetFilter %>">UNSET</a>
                </div>
              </div>
            </form>
            <form action="<%= 'URLqueryparamsPRICE' %>" method="get">
              <div class="name-price-filters">
                <label for="price-filter">PRICE</label>
                <input id="price-filter" type="number" required />
                <div class="filter-form-buttons">
                  <button class="btn <%= price ? 'disabled' : '' %>" type="submit">SET</button>
                  <a class="btn <%= !price ? 'disabled' : '' %>" href="<%= hrefPriceUnsetFilter %>">UNSET</a>
                </div>
              </div>
            </form>
            <form class="tag-filters-form" action="<%= 'URLqueryparamsTAG' %>" method="get">
              <div class="filter-tag-wrapper">
                <div class="two-tags-div">
                  <div class="one-tag-div">
                    <label for="tag-filter-work">work</label>
                    <input type="radio" id="tag-filter-work" name="tags" value="work" required />
                  </div>
                  <div class="one-tag-div">
                    <label for="tag-filter-lifestyle">lifestyle</label>
                    <input type="radio" id="tag-filter-lifestyle" name="tags"
                    value="lifestyle" required />
                  </div>
                </div>                
                <div class="two-tags-div">
                  <div class="one-tag-div">
                    <input type="radio" id="tag-filter-motor" name="tags" value="motor" required />
                    <label for="tag-filter-motor">motor</label>
                  </div>
                  <div class="one-tag-div">
                    <input type="radio" id="tag-filter-mobile" name="tags" value="mobile"
                    required />
                    <label for="tag-filter-mobile">mobile</label>
                  </div>
                </div>
              </div>
              <div class="filter-form-buttons">
                <button class="btn <%= tag ? 'disabled' : '' %>" type="submit">SET</button>
                <a class="btn <%= !tag ? 'disabled' : '' %>" href="<%= hrefTagUnsetFilter %>">UNSET</a>
              </div>
            </form>
          </div>
        </div>
        <% if (productsLength <= 0 || skip > productsLength) { %>
          <h2 class="no-product">No products match the URL</h2>
        <% } %>
        <ul>
          <% products.map((product, index) => { %>
          <li>
            <div>
              <h2><%= product.name %></h2>
              <p>Price: <%= product.price %> â‚¬</p>
              <% product.tags.map((tag, index) => { %>
              <p>Tag <%= index + 1 %>: <%= tag %></p>
              <% }) %>
            </div>
            <div class="buttons-image">
              <div>
                <a href="/delete-product/<%= product._id %>" class="btn"
                  >delete</a
                >
                <a href="/update-product/<%= product._id %>" class="btn"
                  >update</a
                >
              </div>
              <img src="<%= product.image %>" alt="<%= product.name %> image" />
            </div>
          </li>
          <% }) %>
        </ul>
      <% } %>
    </main>
  </body>
</html>
