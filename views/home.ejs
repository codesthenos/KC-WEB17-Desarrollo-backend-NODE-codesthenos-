<!DOCTYPE html>
<html>
  <%- include('head.ejs') %>
  <body>
    <%- include('header.ejs') %>
    <main class="main">
      <% if (session.userId) { %>
        <div class="nav-pagination">
          <% if (productsLength <= 0) { %>
            <h2>No products match the URL</h2>
          <% } %>
          <% if (tag) { %>
            <h3>Tag: <%= tag %></h3>
          <% } %>
          <% if (name) { %>
            <h3>Name: <%= name %></h3>
          <% } %>
          <% if (price) { %>
            <h3>Price: <%= price %></h3>
          <% } %>
          <% if (limit) { %>
            <a class="btn" href="/">Show All</a>
            <% if (skip > 0) { %>
              <a class="btn" href="<%= hrefPreviousPage %>">Previous page</a>
            <% } %>
            <% if (nextPage < productsLength) { %>
              <a class="btn" href="<%= hrefNextPage %>">Next page</a>
            <% } %>
          <% } else { %>
            <a class="btn" href="<%= hrefPaginate %>">Show 3 by 3</a>
          <% } %>
        </div>
        <ul>
          <% products.map((product, index) => { %>
          <li>
            <div>
              <h2>Name: <%= product.name %></h2>
              <p>Price: <%= product.price %> â‚¬</p>
              <% product.tags.map((tag, index) => { %>
              <p>Tag <%= index + 1 %>: <%= tag %></p>
              <% }) %>
            </div>
            <div class="buttons-image">
              <div>
                <a href="/delete-product/<%= product._id %>" class="btn"
                  >delete</a
                >
                <a href="/update-product/<%= product._id %>" class="btn"
                  >update</a
                >
              </div>
              <img src="<%= product.image %>" alt="<%= product.name %> image" />
            </div>
          </li>
          <% }) %>
        </ul>
      <% } %>
    </main>
  </body>
</html>
